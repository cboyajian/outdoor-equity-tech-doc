[["index.html", "Outdoor Equity App Technical Documentation Section 1 About 1.1 Abstract 1.2 About the Authors 1.3 Helpful Links and Resources", " Outdoor Equity App Technical Documentation Clarissa Boyajian and Halina Do-Linh 2022-06-02 Section 1 About 1.1 Abstract Outdoor recreation and access to nature have well-documented positive impacts on mental and physical well-being. Federal public land management agencies in the United States offer a variety of outdoor recreation activities to visitors. However, people from different socioeconomic and identity groups access federal public lands unequally due to historical discrimination and current inequities. This project uses data from the Recreation Information Database (RIDB) and the United States Census Bureau (US Census) to explore patterns of visitor use of reservable overnight sites (such as campgrounds, cabins, hike-in, and more). Specifically, we used 2018 reservation data and US Census data from the next available year to 2018 (i.e. 2018 median income data, 2015 language data). We created the interactive Outdoor Equity App that gives users tools to summarize data, explore relationships between RIDB and US Census variables, view maps of where visitors are coming from for reservable sites in California, and download subset data. This technical documentation includes information on metadata, application maintenance, and next steps for expanding the app to include visitor data from more locations and time periods. 1.2 About the Authors This technical documentation for the Outdoor Equity App was created by Clarissa Boyajian and Halina Do-Linh. The app was created as the final capstone project for their Master of Environmental Data Science degrees from the University of California’s Bren School of Environmental Science &amp; Management. Both women are passionate about environmental justice, open science, the art of data visualizations, and spending time recreating outdoors. Please reach out to either of both of us with any questions. This project could not have been completed without the support and guidance of the Bren School advisors Dr. Frank Davis and Dr. Allison Horst and our external advisors Dr. Kaitlyn Gaynor and Dr. Will Rice. 1.3 Helpful Links and Resources The Outdoor Equity App is was created with the shiny package (Chang et al. 2021) using RStudio version 1.4.1717-3. This technical documentation is hosted using GitHub Pages. The GitHub repository containing all code relating to this technical documentation can be found here and the GitHub repository containing all code relating to Outdoor Equity App can be found here. References "],["executive-summary.html", "Section 2 Executive Summary", " Section 2 Executive Summary Outdoor recreation and access to nature have well-documented positive impacts on mental physical well-being. Federal public land management agencies in the United States offer a wide variety of activities to visitors. However, people from different socioeconomic and identity groups access federal public lands unequally due to historical discrimination and current inequities. The multi-agency program, Recreation One Stop (R1S), oversees the operations of Recreation.gov and aims to increase access to recreation by providing online resources about nationwide recreational opportunities, allowing visitors to make reservations, and making the associated data accessible to all. The rich data on visitors that R1S collects presents an opportunity for the creation of more robust data-driven analytical tools to understand the patterns and correlations of this unequal access across the country and within individual recreation areas. Decision-makers can use these tools to explore and visualize how recreational opportunities on federal public lands are accessed. Our overarching objective is to design and built an interactive web application that allows users to analyze patterns in the access and demand of visitors at reservable overnight sites (such as campgrounds, cabins, hike-in, and more), using data from the Recreation Information Database (RIDB) and the United States Census Bureau (US Census). These analyses will allow federal public land managers to explore relationships among attributes of recreation opportunities, reservation practices, and socioeconomic data from the regions of visitor origin. We achieved this goal through the creation of an interactive web application, the Outdoor Equity App, that allows for a wide range of visualization, metadata documentation, and subset data downloads. This technical documentation serves to document the Outdoor Equity App creation process, include information for ongoing maintenance, and provide suggestions for future use and expansion. The app - which is implemented using the R programming language - accesses public RIDB and US Census data via direct download and application programming interfaces (API). All data and R code scripts are stored on the UCSB Taylor Server and version-controlled through GitHub. We isolated necessary variables and defined, standardized, and aggregated values in the data cleaning process. We calculated additional derived variables for each reservation, such as distance traveled and booking window, and summary statistics (e.g., mean and median) for census data at the ZIP code level. A data set that combines the US Census and RIDB data based on visitors’ home ZIP code is the foundation for the Outdoor Equity App. We visualized distributions of variables and relationships between them with simple, straightforward figures. Within the app, users can subset the data to a specific overnight reservable site and visualize the distribution of a single variable, the relationship between two variables, or the visitorshed map (i.e. area from where visitors are coming) for the selected site. The app currently only includes data for California reservable sites in fiscal year 2018 due to project scope limitations. Throughout the analysis and app creation processes, external advisors and federal public land managers have reviewed and tested the Outdoor Equity App. We incorporated feedback into all parts of the processes to ensure our data, analysis, and final products are robust. Potential future updates to the Outdoor Equity App are discussed in this technical documentation and include temporal and spatial expansions and app maintenance. The temporal expansion would include cleaning additional datasets for years from 2012 to 2021 as well as expanding the app’s interface to allow for temporal selections when subsetting data. The spatial expansion would focus on updating the app structure and server hosting capabilities so the app runs smoothly with data from the full United States. As environmental justice is increasingly recognized as a necessary lens to achieve environmental goals, equitable access to outdoor recreation is a high priority for managers. This tool assists managers to be equity-conscious decision-makers, can be a springboard for researchers who have questions about outdoor recreation, and strengthens nonprofit organizations’ advocacy efforts. We also hope it will be a dynamic tool that empowers visitors to access the information and resources they need to explore outdoor recreation. "],["problem-statement.html", "Section 3 Problem Statement 3.1 Background 3.2 Significance 3.3 Figures", " Section 3 Problem Statement 3.1 Background Outdoor recreation provides critical health and well-being benefits to communities, and in the United States, federal public lands play an important role in providing access to nature. However, access is not equal for all people (Ewert and Hollenhorst 1990); (Flores et al. 2018), which has been recognized as an environmental injustice (Floyd and Johnson 2002). Many studies have shown that federally managed public land is accessed unequally due to historical discrimination and current inequities (Floyd and Johnson 2002); (Shelby, Whittaker, and Danley 1989); (Xiao, Lee, and Larson 2021). The challenge now facing public land management agencies is how to allocate quality visitor experiences to a more diverse user base. Simply increasing recreation opportunities on public land is not a viable solution to this rising demand. Many land management agencies in the U.S. are tasked with the dual mandate of providing recreational opportunities for visitors while also preserving and conserving natural resources and places (Shartaj and Suter 2020). For over a century, striking the balance necessary to uphold this mandate has proven a challenge for federal agencies like the National Parks Service (Meinecke 1937); (Sax 1980), and the recent growth of recreation (Figure 3.1) has renewed concerns about its potential negative environmental impacts and changes to the visitor experience (Hammitt, Cole, and Monz 2015); (Timmons 2019). While managers seek to allocate existing resources (e.g. campsites) through the fairest means possible, including reservation systems, equal opportunities do not translate to equitable access (Shelby, Whittaker, and Danley 1989). Historically, policies of segregation barred certain racial groups from using federal public lands and the legacy of these policies has perpetuated inequitable access for certain racial groups to this day (Xiao, Lee, and Larson 2021). Additionally, previous and current inequities like lack of time, disposable income, access to technology, and lack of social or institutional knowledge about reservation systems impact access to federal public lands (Scott and Lee 2018). At present, park visitation and camping are seeing a surge in popularity, heightened even more by the COVID-19 pandemic, and this rapid increase in demand for recreation opportunities may only further these inequities. 3.2 Significance Currently, much of our understanding about trends in recreation on public lands comes from the Integrated Resource Management Applications (IRMA) Portal, which the National Parks Service uses to monitor visitor counts over time (Bergstrom, Stowers, and Shonkwiler 2020). However, these data lack information on where visitors are coming from. This project leverages the Recreation Information Database (RIDB), managed by Recreation One Stop, an inter-agency partnership that provides reservation services and trip-planning tools on Recreation.gov. The RIDB is far more robust, including data from other land management agencies, and information on visitor zip codes, costs, group sizes, and dates of both reservations and recreation activities. While it is available for public download, there are few robust data-driven analytical tools to understand the patterns and relationships of these inequities within individual recreation areas. Previous research has demonstrated the value of RIDB data in forecasting future recreation demand for single park units (Rice et al. 2019) and analyzing preferential characteristics for popular recreational facilities (Rice and Park 2021). A recent study summarizing RIDB data from national parks (Walls, Wichman, and Ankney 2018) also identified broad patterns in reservations. For example, campsite reservations are made far in advance, but many are canceled last minute (Figure 3.2); visitors tend to visit national parks near their homes (Figure 3.3); and the distribution of incomes of campers appears to be similar to the U.S. population as a whole (Figure 3.4). However, overall, the vast RIDB data has received limited system-level research attention to date, and this work will be the first to explore issues of equity with RIDB data. Furthermore, much of the existing research on outdoor recreation focuses on National Park Service lands, such as Walls, Wichman, and Ankney (2018), which is only a small percentage of all federal land used by the public. The other land management agencies, including US Forest Service, Bureau of Land Management, and Army Corps of Engineers, often lack the capacity and funding to process reservation data, and are less frequently the subjects of outside research. Little is known about how patterns of access and demand vary across land management types. The RIDB includes data from all federal land management agencies, and therefore has tremendous promise to inform our understanding of patterns and trends in recreation across space and time and to inform policies for more equitable campground access for all federal public lands. Our overarching objective for this project is to utilize data from RIDB and US Census to analyze spatial and demand patterns of visitor access at reservable overnight sites (such as campgrounds, cabins, hike-in, and more). We chose to focus on reservable sites since recent studies have shown this type of outdoor recreation to be a good proxy for visitation to federal public lands (Walls, Wichman, and Ankney 2018). These analyses will provide federal public managers an opportunity to explore relationships between and within socioeconomic and reservation variables. 3.3 Figures Figure 3.1: Total annual visitors to the National Park Service system, since its inception through 2020. Visitation has been rapidly increasing, particularly within the last decade. (Source: IRMA) Figure 3.2: Reproduced from Walls, Wichman, and Ankney (2018). Days in advance that National Park campsite reservations are made from 2014 to 2016. Reservations are made far in advance, but many reservations are canceled at the last minute. Figure 3.3: Reproduced from Walls, Wichman, and Ankney (2018). Distance traveled and duration of stay for National Park camping visits from 2014 to 2016. Visitors tend to visit national parks near their homes and stay only two nights, and longer trips are rare. Figure 3.4: Reproduced from Walls, Wichman, and Ankney (2018). Median household income (by zip code) for National Park campers and for US Population. The black line estimates the distribution of median household (HH) income of campers from 2014 to 2016. The red line estimates the distribution of median household for all zip codes in the U.S. using average median household income from 2014 to 2016 where each zip code is an observation. References "],["specific-objectives.html", "Section 4 Specific Objectives", " Section 4 Specific Objectives Federal lands in the United States provide important recreation opportunities to the public, but there is a growing need to understand and mitigate inequities in access to outdoor recreation. This project addressed this need by creating the Outdoor Equity App, an interactive platform for summarizing and visualizing site-specific patterns and trends in visitation volume, demand, and visitors’ location of origin. The platform will integrate nationwide Recreation.gov reservation data with US census data to: Gain insights into demand for reservations across different types of recreation areas. Analyze access to federal public lands among historically underserved groups in relation to recreation site type, cost, location, and demand. Clearly define all variables and values in the metadata documentation. Allow users to download a subset of the combined data for further analysis. "],["summary-of-solution-design.html", "Section 5 Summary of Solution Design 5.1 Glossary and Definitions 5.2 Access, Clean, and Wrangle Data 5.3 Analysis and Visualizations 5.4 Outdoor Equity App 5.5 User Guide and Technical Documentation", " Section 5 Summary of Solution Design 5.1 Glossary and Definitions Throughout this document we define “reservable sites” as traditional campgrounds, single remote campsites, overnight boat-in sites or mooring, equestrian sites, cabins, and other shelters listed in the RIDB data. Table 5.1: A table of abbreviations, their definitions, and source URLS. Abbreviation Definition Source ACS American Community Survey https://www.census.gov/programs-surveys/acs BLM Bureau of Land Management https://www.blm.gov/ BOR Bureau of Reclamation https://www.usbr.gov/ MEDS Master of Environmental Data Science https://bren.ucsb.edu/masters-programs/master-environmental-data-science NPS National Park Service https://www.nps.gov/index.htm R1S Recreation One Stop https://www.recreation.gov/ UCSB University of California, Santa Barbara https://www.ucsb.edu/ USACE United States Army Corps of Engineers https://www.usace.army.mil/ USFS United States Forest Service https://www.fs.usda.gov/ 5.2 Access, Clean, and Wrangle Data RIDB data and US Census American Communities Survey (ACS) data are freely available online to the public. We accessed, cleaned, and wrangled all data outside of the Outdoor Equity App using an .Rmd file and 18 custom-made functions (Tables 5.2, ??, ??, ??). We downloaded RIDB data in CSV format from Recreation.gov and ACS data through API using the R package tidycensus (Walker and Herman 2022). We first subsetted RIDB and ACS datasets to include only the variables relevant to our objectives. We then normalized, aggregated, and calculated variables as necessary. Once both datasets are cleaned and wrangled, we joined them using ZIP codes as the key (common value in both datasets). Finally we wrangled the joined RIDB and ACS dataset to ready them for creating data relationship plots. Table 5.2: A table of the 11 custom cleaning and wrangling functions created for the ACS and RIDB data and the 6 custom cleaning and wrangling functions to create data sets for visitorshed maps and data relationship plots. Script Purpose function_acs_deciles_median_income.R Calculate decile values of California census household median-income function_acs_education.R Call and calculate education percentages for given geographic area and state function_acs_language.R Call and calculate language percentages for given geographic area and state function_acs_median_income.R Call and calculate median-income percentages for given geographic area and state function_acs_race.R Call and calculate race percentages for given geographic area and state function_acs_top_quartile_education.R Calculate weighted third quartile value of California census education percentages function_acs_top_quartile_language.R Calculate weighted third quartile value of California census language percentages function_acs_top_quartile_race.R Calculate weighted third quartile value of California census race percentages function_ridb_subset-pre2018.R Subset RIDB data function_ridb_variable_calculate-pre2018.R Define, standardize, and aggregate values and calculated additional derived variables function_join_ridb_acs.R Join RIDB and ACS data function_map_ca_data.R Create dataset for California ZIP code visitorshed map function_map_us_data.R Create dataset for US State visitorshed map function_ridb_deciles_median_income.R Create dataset for median-income data relationship plots function_ridb_top_quartile_education.R Create dataset for education data relationship plots function_ridb_top_quartile_language.R Create dataset for language data relationship plots function_ridb_top_quartile_race.R Create dataset for race data relationship plots 5.3 Analysis and Visualizations The Outdoor Equity App features interactive maps and plots. Users of this app can select a single reservable site to create custom plots that show a data summary of a single variable or a data relationship between two variables. Visualizations of multiple reservable sites appear as separate plots. Users can also select a single site to create a visitorshed map for the full United States and for the state in which the site is located. 5.4 Outdoor Equity App The app has a navigation bar with four tabs: About, Analysis, Metadata and Data Download. Nested under the Analysis tab are the subtabs of Data Summary, Data Relationship, and Visitorshed Maps. The app opens automatically to the About tab. Figure 5.1: Screenshot of the About page of the Outdoor Equity App Figure 5.2: Screenshot of the Analysis page of the Outdoor Equity App Figure 5.3: Screenshot of the Analysis page of the Outdoor Equity App Figure 5.4: Screenshot of the Analysis page of the Outdoor Equity App Figure 5.5: Screenshot of the Metadata page of the Outdoor Equity App Figure 5.6: Screenshot of the Metadata page of the Outdoor Equity App 5.5 User Guide and Technical Documentation The Outdoor Equity App includes a user guide and metadata information. The user guide section includes a quick overview of the app and helper text on how to start creating visuals. This technical documentation is created with the bookdown package (Xie 2021) and is linked in the About tab of the Outdoor Equity App. Metadata for all variables used within the app are also available on the app Metadata tab and in the Products and Deliverables Section of this document. References "],["products-and-deliverables.html", "Section 6 Products and Deliverables 6.1 R Shiny App 6.2 Metadata", " Section 6 Products and Deliverables 6.1 R Shiny App The Outdoor Equity Shiny App has the following functionality: Visualize statistical distributions of RIDB and US Census variables Visualize relationships between RIDB and US census variables Created visualizations can be downloaded as png View visitorshed maps of reservable sites both nationally and within state site is located in Download customized subsets of the data Help documentation: User guide Metadata Background 6.2 Metadata ## Rows: 38 Columns: 9── Column specification ──────────────────────────────────────────────────────── ## Delimiter: &quot;,&quot; ## chr (7): variable name, data_source, definition, unit, class, data_type, pro... ## dbl (1): total_unique_values ## lgl (1): missing_value_code ## ℹ Use `spec()` to retrieve the full column specification for this data. ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. # create table of metadata knitr::kable(data_joined_2018_metadata_df, align = &quot;l&quot;, caption = &quot;Metadata of joined RIDB-ACS dataset&quot;, row.names = FALSE) Table 6.1: Metadata of joined RIDB-ACS dataset variable name data_source definition unit class data_type provenance (which scripts if used to created this var) missing_value_code total_unique_values agency ridb NA NA character categorical none NA 4 admin_unit ridb NA NA character categorical none NA 43 park ridb NA NA character categorical none NA 447 aggregated_site_type ridb NA NA character categorical data_preparation/functions/function_ridb_variable_calculate-pre2018.R NA 7 facility_id ridb NA NA NA NA NA NA NA facility_state ridb NA NA character categorical none NA 1 customer_zip ridb NA NA character categorical none NA 15861 customer_zip_state acs NA NA NA NA NA NA NA customer_zip_state_full acs NA NA NA NA NA NA NA total_paid ridb NA NA numeric NA NA NA 1567 start_date ridb NA NA date NA NA NA 734 end_date ridb NA NA date NA NA NA 731 order_date ridb NA NA date NA NA NA 364 number_of_people ridb NA NA numeric NA none NA 80 length_of_stay ridb NA NA numeric NA NA NA 21 booking_window ridb NA NA numeric NA NA NA 444 daily_cost_per_visitor ridb NA NA numeric NA NA NA 5095 facility_latitude ridb NA NA NA NA none NA NA facility_longitude ridb NA NA NA NA none NA NA distance_traveled_m ridb NA NA numeric NA NA NA NA zip_code_population.x acs NA NA NA NA NA NA NA asian acs NA NA numeric NA NA NA NA black acs NA NA numeric NA NA NA NA hispanic_latinx acs NA NA numeric NA NA NA NA multiracial acs NA NA numeric NA NA NA NA native_american acs NA NA numeric NA NA NA NA other acs NA NA numeric NA NA NA NA pacific_islander acs NA NA numeric NA NA NA NA white acs NA NA numeric NA NA NA NA zip_code_population.y acs NA NA NA NA NA NA NA college acs estimated percentage of population with a college degree in a zip code percentage numeric continuous data_preparation/functions/function_acs_education.R NA 11641 hs_GED_or_below acs estimated percentage of population with a high school General Educational Development (GED) degree or below in a zip code percentage numeric continuous data_preparation/functions/function_acs_education.R NA 11705 master_or_above acs estimated percentage of population with a master degree or above in a zip code percentage numeric continuous data_preparation/functions/function_acs_education.R NA 11445 some_college acs estimated percentage of population with some college education in a zip code percentage numeric continuous data_preparation/functions/function_acs_education.R NA 11631 median_income acs median household income in the past 12 months in 2019 inflation-adjusted dollars dollars numeric continuous data_preparation/functions/function_acs_median_income.R NA 10439 zip_code_population acs NA NA numeric NA NA NA NA english_only acs estimated percentage of population that speak only english in the home in a zip code percentage numeric continuous data_preparation/functions/function_acs_language.R NA 11469 not_english_only acs estimated percentage of population that speak a language other than english in the home in a zip code percentage numeric continuous data_preparation/functions/function_acs_language.R NA 11469 "],["summary-of-testing.html", "Section 7 Summary of Testing 7.1 Data Integrity 7.2 Code Review 7.3 Product Testing", " Section 7 Summary of Testing 7.1 Data Integrity We screened the data for outliers by summarizing and visualizing the raw data, and assessed whether those outliers need to be removed. We consulted other researchers who are familiar with the RIDB datasets to confirm outliers or other anomalies in the data. Additionally, we documented the percent loss from data wrangling to ensure that our cleaning and wrangling of the data were reasonable. 7.2 Code Review We conducted code reviews within the team, and with faculty or external advisers. We reviewed specific code chunks and scripts related to the Outdoor Equity App. We separated our workflows so that one person created scripts, and the other reviewed them. We did this to maintain some objectivity when evaluating if our datasets were aggregating correctly. We also had a separate workflow for metadata, where one person created and wrote metadata, and the other reviewed it. This confirmed that the data matches how it is being described in the metadata. This confirmation is important as we want our client to be able to scale our product and workflows for future use. 7.3 Product Testing We used three packages to test our R Shiny app. We used shinytest to ensure our app is visualized the way we expect it to using the package’s snapshot-based testing strategy. We used shinyloadtest to test the server hosting the R Shiny App to ensure that it responds in a reasonable amount of time based on the inputs a user provides. Similarly, we utilized the tictoc package during our data wrangling and cleaning, and when we initially created our plots, graphs, and maps to estimate an informed guess of how long it may take the app to run our scripts. Lastly, we used the reactlog package’s diagnostic tool which creates a reactive visualizer for the app to make sure that reactive elements are working the way we expected them to. It is important to note that this diagnostic tool was not useful as our app functionality increased, as the reactive visualizer became impossible to read. There may be other options within reactlog to use the reactive visualizer in a different way, but we did not have enough time to research this. We added temporary print statements to all functions in the app to ensure that the functions were working correctly were are outputting what we expect. We removed print statements from functions that were functioning with zero errors. We did this because print statements can take a long time to run and should not be left in functions or in the app permanently. Additionally, we held multiple meetings with the Recreation One Stop team to obtain real-time and focused feedback to improve user design and experience. 7.3.1 Next steps for testing Due to time constraints, we were not able to implement all testing methods we wanted. We recommend the following testing strategies to make the app more robust and for smoother functionality. Use the R package testthat to conduct unit tests on the scripts used to create Tidy datasets and for subsetted datasets for visualization. This type of testing may be important to avoid silent failures and to ensure that the datasets are aggregating correctly. Use gremlin.js, a JavaScript library used for “Monkey testing” to test the behavior of the R Shiny App. This package is compatible with shiny and does not require any external installation. “Monkey testing” is a type of testing where random, automated tests provide random inputs and then checks the behavior of the app (i.e. if the system or application crashes). We were able to find some finicky bugs through our own testing of random inputs, but “Monkey testing” is the formal process. Employ user testing with federal public land managers, researchers, and those who are not familiar with RIDB data to further enhance the user experience and design. "],["user-documentation.html", "Section 8 User Documentation 8.1 Purpose of the Outdoor Equity Application 8.2 How to Use the Outdoor Equity App 8.3 How to Maintain the Outdoor Equity App 8.4 How to Expand the Outdoor Equity App", " Section 8 User Documentation 8.1 Purpose of the Outdoor Equity Application 8.2 How to Use the Outdoor Equity App 8.2.1 About the APP 8.2.2 Metadata 8.2.3 Data Summary 8.2.4 Data Relationships 8.2.5 Visitorshed Maps 8.2.6 Data Download 8.3 How to Maintain the Outdoor Equity App 8.3.1 Data Preparation Methods 8.3.1.1 RIDB Data 8.3.1.2 U.S. Census Data 8.3.1.3 Data Joining 8.3.2 Statistical Analysis and Data Wrangling for Plots 8.3.2.1 Data Summary 8.3.2.2 Data Relationships 8.3.2.3 Spatial analysis 8.3.3 Data Limitations 8.3.4 Data updates 8.3.5 Server Hosting 8.3.6 Shiny Code Directory 8.4 How to Expand the Outdoor Equity App 8.4.1 Temporal Expansions 8.4.2 Spatial Expansions 8.4.3 Statistical Analysis "],["additional-challenges.html", "Section 9 Additional Challenges", " Section 9 Additional Challenges "],["archive-access.html", "Section 10 Archive Access", " Section 10 Archive Access "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
